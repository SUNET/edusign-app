@startuml

title Loading a document

participant Browser as br
participant "eduSign\nfrontend" as front
participant "eduSign\nbackend" as back
participant "Sign API" as api
participant "Sign service" as serv
participant IdP

front -> front: User drops new document\nin drag & drop area
front -> br: Store document\nin IndexedDB
br -> front: Ok / Not Ok\n(validation)
front -> back: Send document\nto be prepared
back -> api: Prepare document\n(send document to the\nprepare endpoint of the API)
api -> api: prepare document\nand cache prepared document\nfor 15min
api -> back: Ok / Not Ok\nreturn reference\nto prepared document
back -> front: Ok / Not Ok\nreturn reference\nto prepared document
front -> br: Update document in IndexedDB\nwith reference
br -> front: Ok

@enduml
